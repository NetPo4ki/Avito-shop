# Avito –ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä—á–∞ —Å–µ—Ä–≤–∏—Å

REST API —Å–µ—Ä–≤–∏—Å –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –º–µ—Ä—á-–º–∞–≥–∞–∑–∏–Ω–∞.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- JWT –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –º–æ–Ω–µ—Ç –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫—É–ø–∫–∏ –º–µ—Ä—á–∞
- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ > 40% (—Ç–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–µ—Ä–≤–∏—Å–∞: 61.7%)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.22.5
- Docker –∏ Docker Compose
- PostgreSQL 14
- k6 (–¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:

```bash
docker compose up -d
```

2. –°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8080`

## API Endpoints

- `POST /api/auth` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `GET /api/info` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `POST /api/sendCoin` - –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –º–æ–Ω–µ—Ç—ã –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `GET /api/buy/{item}` - –ö—É–ø–∏—Ç—å –º–µ—Ä—á

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ Unit Tests

```bash
go test -v ./...
```

### –ó–∞–ø—É—Å–∫ Integration Tests

```bash
go test ./internal/api -v
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–µ–∫—Ç—É

‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
1. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è JWT –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
2. –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ > 40% (—Ç–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–µ—Ä–≤–∏—Å–∞: 61.7%)
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è:
   - –ü–æ–∫—É–ø–∫–∏ –º–µ—Ä—á–∞
   - –ü–µ—Ä–µ–≤–æ–¥–∞ –º–æ–Ω–µ—Ç
4. –ë–∞–∑–æ–≤–æ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ

üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ:
1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:
   - 100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - 1k RPS
   - 50ms response time SLI
   - 99.99% success rate

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

1. **Load Testing Issues**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ù–∞—á–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–µ –¥–æ—Å—Ç–∏–≥–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è 1k RPS
   - –†–µ—à–µ–Ω–∏–µ: 
     - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º —Ç–µ—Å—Ç–µ
     - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
     - –î–æ–±–∞–≤–ª–µ–Ω –ø—É–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
     - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

2. **Database Concurrency**
   - –ü—Ä–æ–±–ª–µ–º–∞: –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
   - –†–µ—à–µ–Ω–∏–µ: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –æ—á–∏—Å—Ç–∫–∏ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

3. **Test Database Setup**
   - –ü—Ä–æ–±–ª–µ–º–∞: –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
   - –†–µ—à–µ–Ω–∏–µ: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –æ—á–∏—Å—Ç–∫–∏ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## Additional Tasks Status

1. ‚úÖ –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
2. ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
3. ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞ (.golangci.yaml)
